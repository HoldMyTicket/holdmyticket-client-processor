var hmt_client_processor={env:"local",url_prefix:function(t){return"local"==this.env?"http://holdmyticket.loc/"+t:"dev"==this.env?"https://dev.holdmyticket.com/"+t:"production"==this.env?"https://holdmyticket.com/"+t:void 0},spreedly_url:function(t){return"https://core.spreedly.com/v1/payment_methods.json?environment_key="+t},fullsteam_url:function(){return"https://tempintegration-fullsteam-api.azurewebsites.net/"},submit_transaction:function(t,e,n,s){var o=e.processor_method;"spreedly"==o?this._submit_spreedly(t,e,n,s):"fullsteam"==o&&this._submit_fullsteam(t,e,s)},_submit_spreedly:function(t,s,o,r){var i=this;i._get_spreedly_token(t,o,function(t,e){if(t)r&&r(t);else{var n=e.transaction.payment_method.token;i._submit_spreedly_transaction(n,s,o,function(t,e){hmt_client_processor._respond(t,e,r)})}})},_submit_spreedly_transaction:function(t,e,n,s){e.payment_token=t,this._request({url:this.url_prefix("api/shop/carts/submit"),type:"POST",data:e,cb:function(t,e){hmt_client_processor._respond(t,e,s)}})},_submit_fullsteam:function(){var s=this;s._get_fullsteam_auth_key(function(t,e){var n="ok"==e.status?e.authenticationKey:null;s._get_fullsteam_token(card,n,function(t,e){s._submit_fullsteam_transaction(card,transaction,n,function(t,e){})})})},_get_fullsteam_auth_key:function(n){this._request({url:this.url_prefix("api/shop/processors/get_authentication_key"),cb:function(t,e){hmt_client_processor._respond(t,e,n)}})},_get_spreedly_token:function(t,e,n){this._request({url:this.spreedly_url(e),type:"POST",withCredentials:!1,data:t,cb:function(t,e){hmt_client_processor._respond(t,e,n)}})},_get_fullsteam_token:function(t){},_request:function(t){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&(200<=e.status&&e.status<300?t.cb(null,JSON.parse(e.responseText)):t.cb(e))},e.open(t.type||"GET",t.url);var n=null;t.data&&(n=hmt_client_processor._jsonToFormData(t.data),console.log("data",n),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded")),e.send(n)},_respond:function(t,e,n){t&&n&&n(t),n&&n(null,e)}};